<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>スタッフ注文管理 - モーダル</title>
<style>
body { font-family: Arial; margin:0; background:#f9f9f9; }
header { background:#222; color:white; padding:15px; text-align:center; font-size:20px; }
.container { display:flex; flex-wrap:wrap; gap:15px; padding:20px; }
.table { width:100px; height:80px; display:flex; align-items:center; justify-content:center; border-radius:6px; color:white; font-weight:bold; cursor:pointer; position:relative; }
.empty { background:gray; }
.occupied { background:#007bff; }
.notification::after { content:"!"; position:absolute; top:-5px; right:-5px; background:red; width:18px; height:18px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px;}
/* モーダル */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; }
.modal-content { background:#fff; padding:20px; border-radius:6px; width:300px; max-height:80%; overflow-y:auto; }
.close { float:right; cursor:pointer; font-weight:bold; }
.order-item { display:flex; justify-content:space-between; margin:8px 0; border-bottom:1px solid #eee; padding-bottom:5px; }
.status-delivered { text-decoration:line-through; color:gray; }
button { padding:2px 6px; cursor:pointer; background:#007bff; color:white; border:none; border-radius:3px; font-size:12px; }
button:hover { background:#0056b3; }
</style>
</head>
<body>
<header>スタッフ注文管理（モーダル）</header>
<div class="container">
    <div class="table occupied notification" data-id="1">#1</div>
    <div class="table occupied" data-id="2">#2</div>
    <div class="table empty" data-id="3">#3</div>
</div>

<div class="modal" id="modal">
    <div class="modal-content" id="modalContent">
        <span class="close" id="closeModal">&times;</span>
        <h3>テーブル詳細</h3>
        <div id="orderList"></div>
    </div>
</div>

<script>
const ordersData = {
    1:[{name:'ラーメン', status:'order'},{name:'餃子', status:'order'}],
    2:[{name:'チャーハン', status:'order'}]
};
const modal = document.getElementById('modal');
const orderList = document.getElementById('orderList');
const closeModal = document.getElementById('closeModal');

document.querySelectorAll('.table').forEach(t=>{
    t.addEventListener('click', ()=>{
        const id = t.dataset.id;
        orderList.innerHTML = '';
        const orders = ordersData[id];
        if(!orders || orders.length===0){ orderList.innerHTML="<p>注文なし</p>"; }
        else{
            orders.forEach(o=>{
                const div = document.createElement('div');
                div.classList.add('order-item');
                div.innerHTML = `<span>${o.name}</span> <button>渡し済み</button>`;
                div.querySelector('button').addEventListener('click', ()=>{
                    o.status='delivered';
                    div.classList.add('status-delivered');
                });
                orderList.appendChild(div);
            });
        }
        modal.style.display='flex';
    });
});

closeModal.addEventListener('click', ()=> modal.style.display='none');
window.addEventListener('click', e=>{ if(e.target===modal) modal.style.display='none'; });
</script>
</body>
</html>
